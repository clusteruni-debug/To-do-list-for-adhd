# 📋 Navigator - 프로젝트 맥락

> **이 문서는 Claude Code와 Claude Web이 프로젝트를 이해하는 데 필요한 모든 맥락을 담고 있습니다.**

---

## 👤 사용자 상황 (극도로 중요)

### 개인 배경
- **코딩 경험**: 바이브코딩 4일차 (비전공자)
- **직업**: UX 리서치 매니저 (게임 회사)
- **건강**: ADHD (약 복용 중) + 과다수면 (수면클리닉 필요)

### 생활 제약
- **육아**: 21개월 아이 1명
- **임신**: 와이프 4-5주차 (둘째)
- **육아 분담**: 평일 0시간, 주말 2-3시간 (와이프가 전담)
- **통근**: 셔틀 (07:10) vs 일반 (09:30 도착)
  - 셔틀 성공: 19:00 귀가 → 5시간 확보
  - 셔틀 실패: 22:00 귀가 → 2시간만 확보

### 수입 구조 (변화)
#### 과거 (2024 H1)
```
kAITO 프로젝트:
- X 활동 측정 → 토큰 할당
- 20+ 프로젝트 엑셀 관리
- 월 ₩6-7M 수익
```

#### 현재 (2026.01)
```
주 수입원:
1. X 수익화 (첫 지급 ₩900K/2주)
   - 15.9 포스팅 + 117.4 댓글 (2주)
   - 지속 가능성 불확실

2. 크립토 이벤트 (텔레그램)
   - 11개 이벤트 (매일 변동)
   - 5-10분 간단 / 30분-1시간 리서치
   - 마감 직전 급하게 처리
   - 수익 미미/불안정

3. Vibe Coding (새 기회 모색)
   - 현재 이 프로젝트
```

#### 제약사항
- **회사 압박**: X 사용 금지 (업무 중 과도한 사용으로 경고받음)
- **시간 압박**: 3개월 후 와이프 입덧 시작 → 육아 부담 증가
- **6개월 후**: 와이프 배 나옴 → 육아 완전 전담 필요
- **12개월 후**: 둘째 출산 → 생존 모드

### 일정
```
평일:
06:00-09:30  수면 (목표: 07:00 기상, 실제: 09:30)
09:30-11:00  출근 (1.5h) - X, YouTube
11:00-20:00  본업 (9h)
20:00-22:00  퇴근 (2h) - X, YouTube
22:00-24:00  자유시간 (2h) - 웹서핑, Vibe Coding
??:??        취침 (불규칙)

셔틀 성공 시:
08:00 도착 → 17:00 퇴근 → 19:00 귀가 → 5시간 확보
```

---

## 🎯 해결하려는 문제

### 핵심 문제
```
"할일 목록 → 실제 행동" 간극

있는 것:
- 시간
- 능력
- 의지

없는 것:
- 실행
```

### 구체적 증상
1. **우선순위 혼란**
   - 아침의 나: "오늘은 운동하자"
   - 저녁의 나: "피곤해... 내일 하지"
   - 감정/피로도에 따라 중요도가 임의로 바뀜

2. **마감만 보는 패턴**
   - "중요하지만 급하지 않음" = 안 함
   - "급하지만 덜 중요함" = 함
   - 데드라인 있어야 실행됨

3. **기록의 역설**
   - Notion 정리가 일이 됨
   - 정리하느라 실행 안 함
   - 오버헤드가 실행 장벽

4. **ADHD 특성**
   - 멀티태스킹 안 됨
   - 우선순위 판단 어려움
   - 작업 전환 비용 높음
   - 실행 기능 장애 (Executive Dysfunction)

---

## 💡 설계 철학

### 1. "생각 안 하고 실행하게"
```
판단 = 에너지 소비
판단 ↓ = 실행 ↑

구현:
- Next-Action: 지금 할 것 하나만
- 자동 우선순위: 생각 안 하게
- 스와이프: 결정 없이 액션
```

### 2. "작동하는 쓰레기 → 좋은 코드" (Track C)
```
Phase 1: HTML 프로토타입
→ 빠른 검증, 즉시 사용
→ 기술부채 OK

Phase 2: Next.js 전환
→ 제대로 구축
→ 확장 가능하게

Phase 3: Production
→ 실시간 동기화
→ 크로스 플랫폼
```

### 3. ADHD 친화적 UX
```
시각적:
- 마감 3시간: 🔴 빨강 + 깜빡임
- 마감 24시간: 🟠 주황
- Next-Action: 크게 표시

촉각적:
- 완료 시: 진동 (50ms, 100ms, 50ms)
- 추가 시: 진동 (50ms)

청각적:
- (미구현) 알림음
```

### 4. "못 해도 괜찮아" 수용
```
완료율 0% → "괜찮습니다. 내일 하면 됩니다"
포기한 것 8개 → 명시적으로 보여줌
5분이라도 → 성취로 인정
```

---

## 🏗️ 핵심 개념

### 1. 모드 시스템
```javascript
시간대별 자동 전환:

회사 (11-20시):
- 본업만 표시
- X 관련 숨김 (회사 압박)

생존 (22-24시, 셔틀 실패):
- 15분 이하만
- 긴급한 것만
- "오늘은 포기" 수용

여유 (19-24시, 셔틀 성공):
- 전체 표시
- 5시간 활용 전략
```

### 2. 우선순위 계산
```javascript
점수 = f(
  마감시간,      // 가장 중요
  카테고리,      // 본업 > 부업 > 일상
  ROI,           // 수익/시간 (부업만)
  소요시간       // 짧은 것 우대
)

마감시간 점수:
- 지남: -100 (패널티)
- 3시간 내: +100 (최우선)
- 24시간 내: +70
- 3일 내: +40

카테고리 점수:
- 본업: +40 (월급)
- 부업: +35 (현금흐름)
- 일상: +25 (생존 최소)

ROI 보너스 (부업):
- ROI = 수익 / 시간
- 최대 +30점

소요시간 보너스:
- 10분 이하: +10
```

### 3. 카테고리별 차이
```
본업:
- 예상수익 없음
- 마감/소요시간/링크

부업:
- 예상수익 선택사항 (모를 수 있음)
- 마감/소요시간/수익/링크
- ROI 계산에 사용

일상:
- 소요시간만
- 수익 무관
- 생존 최소치
```

### 4. 셔틀 모드
```
성공 (19:00 귀가):
→ "🎉 5시간 확보!"
→ 여유 모드 활성화
→ 모든 카테고리 표시

실패 (22:00 귀가):
→ "⚠️ 긴급 모드"
→ 생존 모드 활성화
→ 짧고 급한 것만
```

---

## 📊 데이터 구조

### Task 객체
```typescript
interface Task {
  // 식별
  id: number;              // timestamp (임시, UUID로 변경 예정)
  
  // 기본 정보
  title: string;           // 작업 제목
  category: '본업' | '부업' | '일상';
  
  // 시간 정보
  deadline: string;        // ISO datetime (선택)
  estimatedTime: number;   // 분 단위
  createdAt: string;       // ISO datetime
  
  // 메타
  link: string;            // URL (텔레그램, 웹)
  expectedRevenue: string; // 부업만, 선택사항
  
  // 상태
  completed: boolean;
  
  // 계산값 (런타임)
  priority?: number;       // 자동 계산
  urgency?: 'urgent' | 'warning' | 'normal' | 'expired';
}
```

### 상태 관리 (현재)
```javascript
appState = {
  currentTab: string,
  shuttleSuccess: boolean,
  tasks: Task[],
  showDetailedAdd: boolean,
  showTaskList: boolean,
  showCompletedTasks: boolean,
  quickAddValue: string,
  detailedTask: Partial<Task>,
  editingTaskId: number | null,
  touchStart: {x: number, taskId: number} | null,
  touchingTaskId: number | null
}
```

---

## 🔄 과거 시행착오 (배운 것)

### v1 (실패)
```
문제: React 라이브러리 로딩 실패
원인: CDN 링크 잘못됨
해결: Vanilla JS로 전환
```

### v2 (실패)
```
문제: 검은 화면, 아무것도 안 뜸
원인: React 구현 방식 잘못됨
해결: Vanilla JS로 재작성
```

### v3 (부분 실패)
```
문제: 텍스트 입력 시 포커스 날아감
원인: 1초마다 전체 리렌더링
해결: 입력 핸들러 이벤트로 분리

문제: PC에서 전체 리스트 안 보임
원인: 토글 로직 버그
해결: showTaskList 상태로 제어
```

### v4 (부분 실패)
```
문제: 대시보드에서 삭제 안 됨
원인: confirm이 두 번 호출됨
해결: 호출 지점에서만 confirm

문제: 완료한 작업 수정 불가
원인: 완료 후 숨김
해결: 완료 취소 기능 추가
```

### v5 (현재)
```
✅ 모든 버그 수정
✅ 기능 완성
✅ 에러 처리 추가
✅ 주석 완비
```

---

## 💡 중요한 설계 결정들

### Q1: 왜 카테고리별 입력 필드가 다른가?
```
A: 맥락에 맞게

본업:
- 예상수익 무의미 (월급)
- 마감/시간만 중요

부업:
- 수익 모를 수 있음
- 강제하면 입력 장벽
- 선택사항으로

일상:
- 수익 무관
- 소요시간만 필요
```

### Q2: 왜 자동 우선순위?
```
A: ADHD 친화적

수동 우선순위:
- 매번 판단 필요
- 에너지 소비
- 판단 피로 → 실행 안 함

자동 우선순위:
- 생각 없이 실행
- 알고리즘이 결정
- 판단 비용 제로
```

### Q3: 왜 Next-Action 하나만?
```
A: 선택 회피

10개 보여주면:
- "뭐부터 하지?" 고민
- 고민 → 회피 → 안 함

1개만 보여주면:
- 고민 불가능
- 하거나 / 안 하거나
- 실행률 증가
```

### Q4: 왜 스와이프 제스처?
```
A: 마찰 최소화

버튼:
- 찾아야 함
- 클릭 정확도 필요
- 2단계 (찾기 + 클릭)

스와이프:
- 직관적
- 빠름
- 1단계 (밀기)
```

### Q5: 왜 "못 해도 괜찮아"?
```
A: 완벽주의 해체

ADHD + 완벽주의:
- 100% 못 하면 0%
- 실패 두려움 → 시작 안 함
- 악순환

수용 철학:
- 70%도 성공
- 5분도 성취
- 내일 하면 됨
- 선순환
```

### Q6: 왜 JSON 백업?
```
A: 로컬스토리지 한계

로컬스토리지:
- 브라우저 삭제 시 날아감
- 기기 간 이동 불가
- 최대 5-10MB

JSON 백업:
- 수동이지만 안전
- 기기 간 이동 가능
- Phase 3에서 자동화 예정
```

---

## 🎓 배운 것들 (비전공자 관점)

### 1. 상태 관리의 중요성
```
처음: 변수 여기저기
→ 버그 추적 불가
→ 디버깅 지옥

지금: appState 하나로
→ 모든 것 한 곳에
→ 이해 가능

다음: Zustand (React 상태 관리)
```

### 2. 렌더링 vs 이벤트
```
처음: 1초마다 전체 다시 그림
→ 입력 포커스 날아감
→ 성능 안 좋음

지금: 이벤트 핸들러
→ 필요한 것만 업데이트
→ 포커스 유지

다음: React (자동 최적화)
```

### 3. 에러 처리의 중요성
```
처음: 에러 무시
→ 앱 크래시
→ 데이터 날아감

지금: try-catch
→ 토스트 알림
→ 우아한 실패

다음: Sentry (에러 트래킹)
```

### 4. 주석의 가치
```
처음: 주석 없음
→ 내일 읽으면 이해 안 됨
→ 다시 배워야 함

지금: 모든 함수 주석
→ 1주일 후에도 이해
→ Claude도 이해

다음: JSDoc (타입 + 주석)
```

---

## 🚧 알려진 한계 (기술부채)

### 1. ID 충돌 가능성
```
현재: timestamp 사용
문제: 밀리초 단위 동시 생성 시 충돌
해결: UUID로 변경 (Phase 2)
```

### 2. 데이터 타입 없음
```
현재: JavaScript (타입 없음)
문제: 런타임 에러 가능
해결: TypeScript 전환 (Phase 2)
```

### 3. 전역 상태
```
현재: appState 전역 변수
문제: 복잡해지면 관리 어려움
해결: Zustand로 전환 (Phase 2)
```

### 4. 전체 리렌더링
```
현재: renderStatic() 전체 그림
문제: 성능 안 좋음 (느림)
해결: React (부분 업데이트)
```

### 5. 로컬스토리지 한계
```
현재: 단일 기기만
문제: 동기화 안 됨
해결: Supabase (Phase 3)
```

### 6. 반응형 미흡
```
현재: 모바일 우선
문제: PC 대화면에서 어색
해결: Tailwind 반응형 (Phase 2)
```

---

## 🎯 다음 개발자를 위한 팁

### Claude Code로 이어받을 때
```markdown
1. 이 파일 (CONTEXT.md) 먼저 읽기
2. ROADMAP.md로 현재 위치 파악
3. ARCHITECTURE.md로 구조 이해
4. navigator-v5.html 코드 읽기
   - 주석 따라가면 이해됨
5. 작업 시작
```

### Claude Web에서 물어볼 때
```markdown
"CONTEXT.md 읽고 요약해줘"
→ 전체 맥락 파악

"ROADMAP.md 보고 다음 할 일 알려줘"
→ Phase 2 작업 시작

"이 부분이 왜 이렇게 설계됐어?"
→ DECISIONS.md 참고
```

### 새 기능 추가 시
```markdown
1. DECISIONS.md에 기록
   - 왜 이렇게 했는가
   - 다른 방법은 고려했는가
   - 트레이드오프는 무엇인가

2. ARCHITECTURE.md 업데이트
   - 구조 변경 사항

3. 주석 작성
   - 미래의 나를 위해
```

---

## 💬 개발 중 참고할 것

### 사용자의 말투/태도
- "일단 작동하게" (완벽주의 회피)
- "맨땅에 헤딩" (비전공자 자각)
- "뽕 뽑자" (효율성 추구)
- "병행하면서" (배움 + 실행)

### 우선순위
1. 작동 > 완벽
2. 빠른 검증 > 오래 설계
3. 실행 > 이해
4. 결과 > 과정

### 소통 방식
- 기술 용어 설명 필요
- 왜 그런지 설명 (궁금해함)
- 선택지 제시 (결정권 존중)
- 격려 (불안감 있음)

---

**이 문서는 살아있습니다. 프로젝트가 진행되며 계속 업데이트됩니다.**

**마지막 업데이트: 2026-01-28 (v5 완성)**
